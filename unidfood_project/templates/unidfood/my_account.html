{% extends 'unidfood/base.html' %}

{% block title %}My Account{% endblock %}

{% block content %}
    <div class="container">
        <h1>My Account</h1>

        <h3>Update Your Account</h3>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ user_form.as_p }} 
            {{ profile_form.as_p }}  
            <button type="submit" name="update_account">Update Account</button>
        </form>

        {% if user_form.errors or profile_form.errors %}
            <p style="color: red;">There was an error updating your account. Please check the fields.</p>
        {% endif %}

        <hr>
        <h2>Change Password</h2>
        <form method="post">
            {% csrf_token %}
            <label for="password1">Password:</label>
            <input type="password" id="password1" name="password1" required>

            <label for="password2">Confirm Password:</label>
            <input type="password" id="password2" name="password2" required>

            <button type="submit" name="change_password">Change Password</button>
        </form>

        {% if password_errors %}
            <p style="color: red;">{{ password_errors }}</p>
        {% endif %}

        <hr>
        <h2>Account Actions</h2>
        <ul>
            <li><a href="{% url 'unidfood:my_reviews' %}">View My Reviews</a></li>
            <li><a href="{% url 'unidfood:my_meetups' %}">View My Meetups</a></li>
            <li><a href="{% url 'unidfood:logout' %}">Logout</a></li>
        </ul>

        <form method="post">
            {% csrf_token %}
            <button type="submit" name="delete_account" style="color: red;">Delete Account</button>
        </form>

        <hr>
        <p>If you wish to delete your account, click the "Delete Account" button. Please note that this action cannot be undone.</p>
    </div>
{% endblock %}
